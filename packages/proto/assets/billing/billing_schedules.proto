syntax = "proto3";

package billing;

import "billing/common.proto";
import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option go_package = "github.com/cinchprotocol/cinch-api/packages/proto/pkg/proto/assets/billing";
option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
  info: {
    title: "Billing Schedules API"
    version: "1.0"
    description: "Billing Schedules service API"
  }
};

service BillingSchedulesService {
  // List all billing schedules
  rpc ListBillingSchedules(ListBillingSchedulesRequest) returns (ListBillingSchedulesResponse) {
    option (google.api.http) = {get: "/v1/billing_schedules"};
  }

  // Create a billing schedule
  rpc CreateBillingSchedule(CreateBillingScheduleRequest) returns (CreateBillingScheduleResponse) {
    option (google.api.http) = {
      post: "/v1/billing_schedules"
      body: "*"
    };
  }

  // Get billing schedule by ID
  rpc GetBillingSchedule(GetBillingScheduleRequest) returns (GetBillingScheduleResponse) {
    option (google.api.http) = {get: "/v1/billing_schedules/{billing_schedule_id}"};
  }

  // Update billing schedule
  rpc UpdateBillingSchedule(UpdateBillingScheduleRequest) returns (UpdateBillingScheduleResponse) {
    option (google.api.http) = {
      put: "/v1/billing_schedules/{billing_schedule_id}"
      body: "*"
    };
  }

  // Delete billing schedule
  rpc DeleteBillingSchedule(DeleteBillingScheduleRequest) returns (DeleteBillingScheduleResponse) {
    option (google.api.http) = {delete: "/v1/billing_schedules/{billing_schedule_id}"};
  }
}

// List billing schedules
message ListBillingSchedulesRequest {}
message ListBillingSchedulesResponse {
  repeated billing.BillingSchedule billing_schedules = 1;
}

// Create billing schedule
message CreateBillingScheduleRequest {
  string name = 1;
  string description = 2;
  string interval = 3;
  int32 period_value = 4;
  int32 billing_day = 5;
  google.protobuf.Timestamp start_date = 6;
  google.protobuf.Timestamp end_date = 7;
}
message CreateBillingScheduleResponse {
  string billing_schedule_id = 1;
  string status = 2;
  google.protobuf.Timestamp created_at = 3;
}

// Get billing schedule
message GetBillingScheduleRequest {
  string billing_schedule_id = 1;
}
message GetBillingScheduleResponse {
  billing.BillingSchedule billing_schedule = 1;
}

// Update billing schedule
message UpdateBillingScheduleRequest {
  string billing_schedule_id = 1;
  string name = 2;
  string description = 3;
  string interval = 4;
  int32 period_value = 5;
  int32 billing_day = 6;
  google.protobuf.Timestamp start_date = 7;
  google.protobuf.Timestamp end_date = 8;
}
message UpdateBillingScheduleResponse {
  billing.BillingSchedule billing_schedule = 1;
}

// Delete billing schedule
message DeleteBillingScheduleRequest {
  string billing_schedule_id = 1;
}
message DeleteBillingScheduleResponse {
  string billing_schedule_id = 1;
  string status = 2;
}
