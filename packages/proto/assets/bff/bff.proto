syntax = "proto3";

package bff;

import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option go_package = "github.com/cinchprotocol/cinch-api/packages/proto/pkg/proto/assets/bff";
option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
  info: {
    title: "BFF API"
    version: "1.0"
    description: "Backend-For-Frontend service API providing aggregated data access and business logic orchestration for client applications"
  }
};

// BFFService provides backend-for-frontend functionality, aggregating and orchestrating
// calls to multiple backend services to provide optimized APIs for client applications
service BFFService {
  // Health check endpoint to verify service availability and status
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse) {
    option (google.api.http) = {get: "/v1/bff/health"};
  }

  // Create a new BFF record with user and amount information
  rpc CreateBFF(CreateBFFRequest) returns (CreateBFFResponse) {
    option (google.api.http) = {
      post: "/v1/bff"
      body: "*"
    };
  }
}

// Health check request message - no parameters required
message HealthCheckRequest {}

// Health check response containing service status information
message HealthCheckResponse {
  // Service status indicator (e.g., "healthy", "degraded", "unhealthy")
  string status = 1;
}

// Request message for creating a new BFF record
message CreateBFFRequest {
  // Unique identifier for the user making the request (UUID format)
  string user_id = 1;
  // Amount value in the base currency unit (e.g., dollars, not cents)
  double amount = 2;
}

// Response message for BFF record creation
message CreateBFFResponse {
  // Operation status indicating success or failure ("success", "failed", "pending")
  string status = 1;
  // Confirmed amount value that was processed
  double amount = 2;
}
